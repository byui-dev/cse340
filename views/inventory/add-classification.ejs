<h1><%= title %></h1>

<% if (messages.notice) { %>
    <p class="notice"><%= messages.notice %></p>
<% } %>

<% if (messages.error) { %>
    <p class="error"><%= messages.error %></p>
<% } %>

<% if (errors) { %>
    <ul class="error-list">
    <% errors.array(). forEach(error => { %>
        <li class="error"><%= error.msg %></li>
    <% }) %>       
    </ul>
<% } %>

<form id="addClassificationForm" action="/inv/add-classification" method="post">
    <div class="form-group">
         <label for="classification_name">Classification Name:</label>
         <input
             type="text"
             id="classification_name"
             name="classification_name"
             required
             pattern="^[A-Za-z0-9]+$"
             title="Classification name cannot contain spaces or special characters"
             value="<%= locals.classification_name || '' %>"
             placeholder="Enter classification name (no spaces or special characters)"
        >
        <span class="form-help">Only letters and numbers are allowed. No spaces or special characters.</span>    
    </div>

    <div class="form-group">
        <button type="submit" class="btn btn-primary">Add Classification</button>
        <a href="/inv" class="btn btn-secondary">Cancel</a>
    ]</div>
</form>

<script>
    // Client-side validation
    document.getElementById('addClassificationForm').addEventListener('submit', function(e) {
        const classificationName = document.getElementById('classification_name').value;
        const pattern = /^[A-Za-z0-9]+$/;
        
        if(!classificationName) {
           e.preventDefault();
           alert('Classification name is required.');
           return false;  
        }

        if(!pattern.test(classificationName)) {
          e.preventDefault();
          alert('Classification name cannot contain spaces or special characters.');
          return false;
        }

        return true;
    });

    // Real time validation feedback
    document.getElementById('classification_name').addEventListener('input', function(e) {
        const value = e.target.value;
        const pattern = /^[A-Za-zo-9]+$/;

        if (value && !pattern.test(value)) {
            e.target.setCustomValidity('Only letters and numbers are allowed');
            e.target.style.borderColor = 'red';
        } else {
           e.target.setCustomValidity('');
           e.target.style.borderColor = '#ddd';
        }
    });
</script>